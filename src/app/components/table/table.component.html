

<div class="table-section">

  <div class="mb-3">
    <p-button
        type="button"
        icon="pi pi-chevron-left"
        (click)="prev()"
        [disabled]="isFirstPage()"
        styleClass="p-button-text" />
    <p-button
        type="button"
        icon="pi pi-refresh"
        (click)="reset()"
        styleClass="p-button-text" />
    <p-button
        type="button"
        icon="pi pi-chevron-right"
        (click)="next()"
        [disabled]="isLastPage()"
        styleClass="p-button-text" />
  </div>
  <p-table
    #dt2
    [value]="customers"
    [paginator]="true"
    [first]="first"
    [showCurrentPageReport]="true"
    [rows]="5"
    [rowsPerPageOptions]="[5,10, 25, 50]"
    [paginator]="true"
    sortMode="multiple"
    [globalFilterFields]="['title','incident_id','category_id']"
    [tableStyle]="{ 'min-width': '50rem' }"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    (onPage)="pageChange($event)"
  >
  <ng-template pTemplate="caption">
    <div class="flex">
      <i class="bi bi-eraser" (click)="clear(dt2)"></i>
        <span class="p-input-icon-left ml-auto">
            <i class="pi pi-search"></i>
            <input class="search" pInputText type="text" [(ngModel)]="searchValue" (input)="filterGlobal($event)" placeholder="Search keyword" />
        </span>
    </div>
  </ng-template>
    <ng-template pTemplate="header">
        <tr>

            <th style="width:12%" pSortableColumn="incident_id">
              <div class="flex align-items-center">
                <p-sortIcon field="incident_id" />ID
                <p-columnFilter type="text" field="incident_id" display="menu" />
              </div>
            </th>

            <th style="width:20%">
              <div class="flex align-items-center">
                  Title
                  <p-columnFilter type="text" field="title" display="menu" />
              </div>
            </th>

            <th style="width:10%">
              <div class="flex align-items-center">
                  Type
                  <p-columnFilter type="text" field="type" display="menu" />
              </div>
              </th>
              <th style="width:13%">
              <div class="flex align-items-center">
                  Categories
                  <p-columnFilter type="text" field="category_id" display="menu" />
              </div>
              </th>
            <th style="width:15%">Reported By
              <p-columnFilter type="text" field="type" display="menu" />
            </th>
            <th style="width:10%" class="column-visible">
              <div class="flex align-items-center ">
                  Priority
                  <p-columnFilter field="priority" display="menu">
                    <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                        <p-dropdown
                            [options]="priorities"
                            [(ngModel)]="priorityValue"
                            (onChange)="filter($event.value)"
                            placeholder="Select Priority">
                        </p-dropdown>
                    </ng-template>
                </p-columnFilter>
              </div>
              </th>
              <th style="width:10%">
                <div class="flex align-items-center">
                    Status
                    <p-columnFilter type="text" field="status" display="menu" />
                </div>
                </th>
            <th style="width:15%">Action</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-customer>
        <tr>
            <td>{{ customer.incident_id }}</td>
            <td>{{ customer.title }}</td>
            <td>{{ customer.incident_type}}</td>
            <td>{{ customer.category_id }}</td>
            <td>{{ customer.reported_by }}</td>
            <td>{{ customer.priority}}</td>
            <td>{{ customer.status }}</td>
            <td>
              <div class="card flex justify-content-center">

               <i class="bi bi-three-dots-vertical" (click)="menu.toggle($event)"></i>
               <p-tieredMenu #menu [model]="menuitems" [popup]="true" />
                <i class="bi bi-send" (click)="openForwardingModal(customer.incident_id)"></i>
            </div>



     </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="paginatorleft">
        <p-button type="button" icon="pi pi-plus" styleClass="p-button-text" />
    </ng-template>
    <ng-template pTemplate="paginatorright">
        <p-button type="button" icon="pi pi-cloud" styleClass="p-button-text" />
    </ng-template>
  </p-table>
  </div>

  <p-dialog header="Forward Incident" [(visible)]="displayForwardingModal" [modal]="true" [style]="{width: '50vw'}">

  </p-dialog>

